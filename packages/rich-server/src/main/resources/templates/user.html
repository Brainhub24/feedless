<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
  <meta charset="UTF-8"/>
  <title>User [[ ${name} ]]</title>
  <th:block th:include="fragments/components :: styles"></th:block>
</head>
<body>
<div th:include="fragments/components :: header"></div>
<div style="flex: 1; display: flex; flex-direction: column;">
  <h2 th:text="${name}"></h2>
  <p th:text="${description}"></p>

  <div class="content">
    <div class="list" th:each="group : ${groups}">
      <div class="list__header">
        <a th:unless="${group.id == null}" th:href="'/group:' + ${group.id}">
          <th:block th:text="${group.name}"></th:block>
        </a>
        <th:block th:if="${group.id == null}" th:text="${group.name}"></th:block>
        <th:block th:if="${group.name == 'Public'}">
          <a th:href="'/user:' + ${emailHash} + '/rss'">rss</a> /
          <a th:href="'/user:' + ${emailHash} + '/atom'">atom</a> /
          <a th:href="'/user:' + ${emailHash} + '/json'">json</a>
        </th:block>
      </div>
      <div class="items">

        <ul th:unless="${ group.subscriptions == null }">
          <li th:each="subscription : ${group.subscriptions}">
            <a th:href="'/subscription:' + ${subscription.id}">
              <strong th:text="${subscription.title}"></strong></a>

            <span th:if="@{ ${subscription.throttled} }">
            (max [[ ${subscription.throttle.batchSize} ]] / [[ ${subscription.throttle.interval} ]] [[ ${subscription.throttle.timeUnit} ]])
          </span>

          </li>
        </ul>

        <div class="item"
             th:unless="${ group.entries == null }"
             th:each="entry : ${group.entries}">
          <a th:href="@{ ${entry.link} }" th:text="${entry.title}"></a>
          ( <span th:text="${entry.domain}"></span> )
          <p>
            <span class="score">[[ ${entry.score} ]] points</span>
            via <a th:href="'/source:' + ${ sourceId }" class="source">source</a>
            <span class="age" style="float: right" th:text="${ #dates.format(entry.pubDate, 'dd-MM-yyyy' ) }"></span>
          </p>
        </div>
      </div>
    </div>
  </div>

</div>
<div th:include="fragments/components :: footer"></div>
</body>

<th:block th:include="fragments/components :: scripts"></th:block>

</html>
