<ion-item
  *ngIf="feed"
  [color]="feed.color"
  [button]="true"
  (click)="goToSources()"
>
  <ion-label>
    <ion-note>Feed</ion-note>
    <h3 style="font-size: 1.1rem">{{ feed.title }}</h3>
    <p>{{ feed.text }}</p>
  </ion-label>
</ion-item>
<ion-accordion value="filter" toggle-icon-slot="start">
  <ion-item
    slot="header"
    [ngClass]="{ 'ion-pristine': importerFormGroup.pristine }"
  >
    <ion-label> Refine Items </ion-label>
  </ion-item>
  <ion-grid slot="content">
    <ion-row>
      <ion-col push="1">
        <ion-item class="ion-no-margin">
          <ion-checkbox
            slot="start"
            #filter
            [formControl]="internalFormGroup.controls.showFilter"
          ></ion-checkbox>
          <ion-label>Filter Items</ion-label>
        </ion-item>
      </ion-col>
    </ion-row>
    <ion-item *ngIf="filter.checked">
      <ion-textarea
        style="min-height: 150px"
        [autoGrow]="true"
        placeholder="List of words that must be contained, prefix with '-' for must not contain: php -advertisement"
        [formControl]="importerFormGroup.controls.filter"
      ></ion-textarea>
    </ion-item>
    <ion-row>
      <ion-col push="1">
        <ion-item class="ion-no-margin">
          <ion-checkbox
            [formControl]="importerFormGroup.controls.reviewItems"
            slot="start"
          ></ion-checkbox>
          <ion-label>Review Items</ion-label>
        </ion-item>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col push="1">
        <ion-item class="ion-no-margin" [disabled]="true">
          <ion-checkbox [checked]="true" slot="start"></ion-checkbox>
          <ion-label> Fetch Fulltext </ion-label>
        </ion-item>
      </ion-col>
    </ion-row>
    <ion-row class="ion-no-margin">
      <ion-col push="1">
        <ion-item class="ion-no-margin ion-text-wrap" [disabled]="true">
          <ion-checkbox slot="start"></ion-checkbox>
          <ion-label> Resolve Shortened URLs </ion-label>
        </ion-item>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col push="1" class="ion-no-margin">
        <ion-item class="ion-no-margin" [disabled]="true">
          <ion-checkbox [checked]="true" slot="start"></ion-checkbox>
          <ion-label> Inline Images </ion-label>
        </ion-item>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-accordion>

<ion-accordion value="output" toggle-icon-slot="start">
  <ion-item
    slot="header"
    [ngClass]="{
      'ion-pristine': internalFormGroup.controls.harvestRate.pristine
    }"
  >
    <ion-label> Update Rate and Through Put</ion-label>
  </ion-item>
  <ion-grid slot="content">
    <ion-row>
      <ion-col push="1">
        <ion-radio-group
          value="text"
          #harvestRate
          [formControl]="internalFormGroup.controls.harvestRate"
        >
          <ion-item *ngFor="let o of toArray(harvestRateEnum)">
            <ion-radio slot="start" [value]="o.value"></ion-radio>
            <ion-label>{{ toHarvestRateLabel(o.key) }}</ion-label>
          </ion-item>
        </ion-radio-group>
      </ion-col>
    </ion-row>
    <ng-container *ngIf="harvestRate.value === harvestRateEnum.faster">
      <ion-row>
        <ion-col push="1">
          <ion-range
            [min]="refreshRateMin"
            [max]="refreshRateMax"
            style="height: 20px"
            color="primary"
            class="ion-no-margin"
            [formControl]="importerFormGroup.controls.refreshRate"
          ></ion-range>
        </ion-col>
      </ion-row>
      <ion-row *ngIf="importerFormGroup.value.refreshRate <= 300">
        <ion-col offset="1" size="4">
          <ion-input
            (ngModelChange)="
              importerFormGroup.controls.refreshRate.setValue($event)
            "
            style="height: 20px"
            [min]="refreshRateMin"
            [max]="refreshRateMax"
            color="primary"
            [formControl]="importerFormGroup.controls.refreshRate"
          ></ion-input>
        </ion-col>
        <ion-col size="5" style="align-self: center; white-space: nowrap">
          min
        </ion-col>
      </ion-row>
      <ion-row *ngIf="importerFormGroup.value.refreshRate > 300">
        <ion-col
          class="ion-text-center"
          style="align-self: center; white-space: nowrap"
        >
          {{ humanizeMinutes() }}
        </ion-col>
      </ion-row>
    </ng-container>
    <ng-container *ngIf="harvestRate.value === harvestRateEnum.slower">
      <ion-row>
        <ion-col size="4">max. Items</ion-col>
        <ion-col>
          <ion-input
            name="maxCount"
            type="number"
            color="primary"
            placeholder="5"
            class="ion-text-center"
            [formControl]="importerFormGroup.controls.segmentSize"
            [min]="1"
            [max]="50"
          ></ion-input>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col size="4">Period</ion-col>
        <ion-col>
          <ion-select #selectInterval value="d" class="ion-text-center">
            <ion-select-option
              *ngFor="let o of toArray(throttlePeriodEnum)"
              [value]="o.key"
            >
              {{ o.value }}
            </ion-select-option>
          </ion-select>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col size="4">First Delivery</ion-col>
        <ion-col>
          <ion-datetime-button
            [disabled]="!selectInterval.value"
            datetime="datetime"
          ></ion-datetime-button>
          <ion-modal [keepContentsMounted]="true">
            <ng-template>
              <ion-datetime id="datetime"></ion-datetime>
            </ng-template>
          </ion-modal>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col push="1" class="ion-no-margin">
          <ion-item class="ion-no-margin">
            <ion-checkbox
              slot="start"
              [formControl]="importerFormGroup.controls.digest"
            ></ion-checkbox>
            <ion-label>Ship as one</ion-label>
          </ion-item>
        </ion-col>
      </ion-row>
    </ng-container>
  </ion-grid>
</ion-accordion>

<ion-accordion value="sink" toggle-icon-slot="start">
  <ion-item
    slot="header"
    [ngClass]="{
      'ion-pristine':
        importerFormGroup.controls.email.pristine &&
        importerFormGroup.controls.webhook.pristine
    }"
  >
    <ion-label> Additional Sinks </ion-label>
  </ion-item>
  <ion-grid slot="content">
    <ion-row
      [appFeatureToggle]="featureNameEnum.ItemEmailForward"
      [appFeatureToggleOptions]="{ whenInactive: 'hide' }"
    >
      <ion-col size="4">Email</ion-col>
      <ion-col>
        <ion-input
          type="email"
          color="primary"
          placeholder="Type Email"
          [formControl]="importerFormGroup.controls.email"
        ></ion-input>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col size="4">Webhook</ion-col>
      <ion-col>
        <ion-input
          placeholder="Type URL"
          color="primary"
          [formControl]="importerFormGroup.controls.webhook"
        ></ion-input>
      </ion-col>
    </ion-row>
    <!--    <ion-row>-->
    <!--      <ion-col size="4">Push</ion-col>-->
    <!--      <ion-col>-->
    <!--        <ion-button>Register WebSocket</ion-button>-->
    <!--      </ion-col>-->
    <!--    </ion-row>-->
  </ion-grid>
</ion-accordion>

<!--<ion-accordion value="sink" toggle-icon-slot="start">-->
<!--  <ion-item slot="header">-->
<!--    <ion-label>Privacy</ion-label>-->
<!--  </ion-item>-->
<!--  <ion-grid slot="content">-->
<!--    <ion-row>-->
<!--      <ion-col push="2" class="ion-no-margin">-->
<!--        <ion-item class="ion-no-margin">-->
<!--          <ion-checkbox slot="start"></ion-checkbox>-->
<!--          <ion-label> Public </ion-label>-->
<!--        </ion-item>-->
<!--      </ion-col>-->
<!--    </ion-row>-->
<!--  </ion-grid>-->
<!--</ion-accordion>-->
