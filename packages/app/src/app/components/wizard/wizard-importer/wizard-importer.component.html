<ion-item
  *ngIf="feed"
  [color]="feed.color"
  [button]="true"
  (click)="goToSources()"
>
  <ion-label>
    <ion-note>Feed</ion-note>
    <h3 style="font-size: 1.1rem">{{ feed.title }}</h3>
    <p>{{ feed.text }}</p>
  </ion-label>
</ion-item>
<ion-accordion value="filter" toggle-icon-slot="start">
  <ion-item slot="header" [ngClass]="{'ion-pristine': importerFormGroup.pristine}">
    <ion-label> Items </ion-label>
  </ion-item>
  <ion-grid slot="content">
    <ion-row>
      <ion-col push="1">
        <ion-item class="ion-no-margin">
          <ion-checkbox
            slot="start"
            #filter
            [formControl]="internalFormGroup.controls.showFilter"
          ></ion-checkbox>
          <ion-label>Filter Items</ion-label>
        </ion-item>
      </ion-col>
    </ion-row>
    <ion-row *ngIf="filter.checked">
      <ion-col push="1">
        <ion-item
          class="ion-no-margin"
          [color]="
            importerFormGroup.value.filter?.length === 0 ? 'success' : 'primary'
          "
          (click)="showFilterModal()"
          [button]="true"
        >
          <ion-label class="ion-text-center">
            <span *ngIf="importerFormGroup.value.filter?.length === 0"
              >Define a Filter</span
            >
            <span *ngIf="importerFormGroup.value.filter?.length > 0">
              Change Filter
            </span>
          </ion-label>
        </ion-item>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col push="1">
        <ion-item class="ion-no-margin">
          <ion-checkbox
            [formControl]="importerFormGroup.controls.autoRelease"
            slot="start"
          ></ion-checkbox>
          <ion-label> Review New Items </ion-label>
        </ion-item>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col push="1">
        <ion-item class="ion-no-margin">
          <ion-checkbox [checked]="true" slot="start"></ion-checkbox>
          <ion-label> Fetch Fulltext </ion-label>
        </ion-item>
      </ion-col>
    </ion-row>
    <ion-row class="ion-no-margin">
      <ion-col push="1">
        <ion-item class="ion-no-margin ion-text-wrap">
          <ion-checkbox slot="start"></ion-checkbox>
          <ion-label> Resolve Shortened URLs </ion-label>
        </ion-item>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col push="1" class="ion-no-margin">
        <ion-item class="ion-no-margin">
          <ion-checkbox [checked]="true" slot="start"></ion-checkbox>
          <ion-label> Inline Images </ion-label>
        </ion-item>
      </ion-col>
    </ion-row>
    <!--    <ion-row class="ion-no-margin">-->
    <!--      <ion-col push="2" class="ion-no-margin">-->
    <!--        <ion-item class="ion-no-margin">-->
    <!--          <ion-checkbox slot="start"></ion-checkbox>-->
    <!--          <ion-label> Speech to Text </ion-label>-->
    <!--        </ion-item>-->
    <!--      </ion-col>-->
    <!--    </ion-row>-->
  </ion-grid>
</ion-accordion>

<ion-accordion value="refresh" toggle-icon-slot="start">
  <ion-item slot="header" [ngClass]="{'ion-pristine': nativeFeedFormGroup.pristine}">
    <ion-label> Refresh Rate </ion-label>
  </ion-item>
  <ion-grid slot="content">
    <ion-row>
      <ion-col push="1">
        <ion-item class="ion-no-margin">
          <ion-checkbox slot="start" #harvestRate></ion-checkbox>
          <ion-label>Custom Rate</ion-label>
        </ion-item>
      </ion-col>
    </ion-row>
    <ng-container *ngIf="harvestRate.checked">
      <ion-row>
        <ion-col push="1">
          <ion-range
            [min]="2"
            color="primary"
            [max]="30000"
            class="ion-no-margin"
            [formControl]="nativeFeedFormGroup.controls.harvestIntervalMin"
          ></ion-range>
        </ion-col>
      </ion-row>
      <ion-row *ngIf="nativeFeedFormGroup.value.harvestIntervalMin <= 300">
        <ion-col offset="1" size="4">
          <ion-input
            (ngModelChange)="
              nativeFeedFormGroup.controls.harvestIntervalMin.setValue($event)
            "
            [min]="2"
            [max]="30000"
            color="primary"
            [ngModel]="nativeFeedFormGroup.value.harvestIntervalMin"
          ></ion-input>
        </ion-col>
        <ion-col size="5" style="align-self: center; white-space: nowrap">
          min
        </ion-col>
      </ion-row>
      <ion-row *ngIf="nativeFeedFormGroup.value.harvestIntervalMin > 300">
        <ion-col
          class="ion-text-center"
          style="align-self: center; white-space: nowrap"
        >
          {{ humanizeMinutes() }}
        </ion-col>
      </ion-row>
    </ng-container>
  </ion-grid>
</ion-accordion>

<ion-accordion value="output" toggle-icon-slot="start">
  <ion-item slot="header">
    <ion-label> Through Put </ion-label>
  </ion-item>
  <ion-grid slot="content">
    <ion-row>
      <ion-col push="1" class="ion-no-margin">
        <ion-item class="ion-no-margin">
          <ion-checkbox slot="start" #throttle></ion-checkbox>
          <ion-label>Throttle</ion-label>
        </ion-item>
      </ion-col>
    </ion-row>
    <ng-container *ngIf="throttle.checked">
      <ion-row>
        <ion-col size="4">max. Items</ion-col>
        <ion-col>
          <ion-input
            name="maxCount"
            type="number"
            color="primary"
            placeholder="5"
            value="5"
          ></ion-input>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col size="4">Per</ion-col>
        <ion-col>
          <ion-select #selectInterval value="d">
            <ion-select-option value="d">Day</ion-select-option>
            <ion-select-option value="w">Week</ion-select-option>
            <ion-select-option value="m">Month</ion-select-option>
            <ion-select-option value="y">Year</ion-select-option>
          </ion-select>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col size="4">By</ion-col>
        <ion-col>
          <ion-select>
            <ion-select-option value="score">Score</ion-select-option>
            <ion-select-option value="length">Text Length</ion-select-option>
            <ion-select-option value="links">Link Count</ion-select-option>
          </ion-select>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col size="4">Reference</ion-col>
        <ion-col>
          <ion-datetime-button
            [disabled]="!selectInterval.value"
            datetime="datetime"
          ></ion-datetime-button>
          <ion-modal [keepContentsMounted]="true">
            <ng-template>
              <ion-datetime id="datetime"></ion-datetime>
            </ng-template>
          </ion-modal>
        </ion-col>
      </ion-row>
    </ng-container>
    <ion-row>
      <ion-col push="1" class="ion-no-margin">
        <ion-item class="ion-no-margin" [disabled]="!throttle.checked">
          <ion-checkbox slot="start"></ion-checkbox>
          <ion-label>Digest (As one Item)</ion-label>
        </ion-item>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-accordion>

<ion-accordion value="sink" toggle-icon-slot="start">
  <ion-item slot="header" [ngClass]="{'ion-pristine': importerFormGroup.pristine}">
    <ion-label> Sinks </ion-label>
  </ion-item>
  <ion-grid slot="content">
    <ion-row>
      <ion-col size="4">Email</ion-col>
      <ion-col>
        <ion-input
          type="email"
          color="primary"
          placeholder="Type Email"
          [formControl]="importerFormGroup.controls.email"
        ></ion-input>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col size="4">Webhook</ion-col>
      <ion-col>
        <ion-input
          placeholder="Type URL"
          color="primary"
          [formControl]="importerFormGroup.controls.webhook"
        ></ion-input>
      </ion-col>
    </ion-row>
    <!--    <ion-row>-->
    <!--      <ion-col size="4">Push</ion-col>-->
    <!--      <ion-col>-->
    <!--        <ion-button>Register WebSocket</ion-button>-->
    <!--      </ion-col>-->
    <!--    </ion-row>-->
  </ion-grid>
</ion-accordion>

<!--<ion-accordion value="sink" toggle-icon-slot="start">-->
<!--  <ion-item slot="header">-->
<!--    <ion-label>Privacy</ion-label>-->
<!--  </ion-item>-->
<!--  <ion-grid slot="content">-->
<!--    <ion-row>-->
<!--      <ion-col push="2" class="ion-no-margin">-->
<!--        <ion-item class="ion-no-margin">-->
<!--          <ion-checkbox slot="start"></ion-checkbox>-->
<!--          <ion-label> Public </ion-label>-->
<!--        </ion-item>-->
<!--      </ion-col>-->
<!--    </ion-row>-->
<!--  </ion-grid>-->
<!--</ion-accordion>-->
