<div style="flex: 1; display: flex; flex-direction: column; position: relative">
  <ion-item *ngIf="showTitle">
    <ion-label>
      <h3>{{ title }}</h3>
      <p>{{ feedUrl }}</p>
    </ion-label>
  </ion-item>
  <div style="flex: 1; display: flex; position: relative; overflow: auto">
    <ion-spinner *ngIf="loading" name="dots"></ion-spinner>
    <ng-container *ngIf="!loading">
      <div *ngIf="errorMessage">
        {{ errorMessage }}
      </div>
      <ion-list *ngIf="!errorMessage" style="position: absolute; width: 100%">
        <ion-item
          *ngFor="let item of feedItems; let feedIndex = index"
          [ngClass]="{ 'item--omitted': item.omitted }"
        >
          <app-bubble
            *ngIf="filter"
            [color]="filterChanged ? 'gray' : item.omitted ? 'red' : 'green'"
          ></app-bubble>
          <ion-label>
            <p>
              <ion-note>{{ feedIndex + 1 }}.</ion-note>
            </p>
            <h2>{{ item.content.title || "No Title" }}</h2>
            <p>
              <a
                [href]="item.content.url"
                class="title"
                target="_blank"
                referrerpolicy="no-referrer"
                >{{ item.content.url }}</a
              >
            </p>
            <p>
              Published
              {{ toDate(item.content.publishedAt) | date: "dd. MMM. YYYY" }}
            </p>
            <p *ngIf="item.content.startingAt">
              Starting
              {{ toDate(item.content.startingAt) | date: "dd. MMM. YYYY" }}
            </p>
            <p class="ion-text-wrap">
              {{ item.content.contentText }}
            </p>
          </ion-label>
        </ion-item>
      </ion-list>
    </ng-container>
  </div>
  <div
    *ngIf="filterChanged && !loading"
    style="
      position: absolute;
      z-index: 100;
      align-items: center;
      justify-content: center;
      display: flex;
      width: 100%;
      height: 100%; ;
    "
  >
    <div
      style="
        position: absolute;
        width: 100%;
        height: 100%;
        background: var(--ion-item-background);
        opacity: 0.7;
      "
    ></div>
    <ion-button size="small" color="success" (click)="refresh()"
      >Apply Changes</ion-button
    >
  </div>
</div>
