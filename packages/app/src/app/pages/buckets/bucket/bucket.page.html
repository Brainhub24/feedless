<app-page-header>
  <ion-title>Bucket</ion-title>
</app-page-header>

<ion-content>
  <img [src]="bucket?.imageUrl" alt="" />
  <div class="ion-margin-horizontal" style="margin-top: 200px">
    <ion-buttons class="ion-float-end">
      <ion-select
        #edit
        interface="popover"
        [hidden]="true"
        (ionChange)="handleBucketAction($event)"
      >
        <ion-select-option value="edit">Edit</ion-select-option>
        <ion-select-option value="delete">Delete</ion-select-option>
      </ion-select>
      <ion-button (click)="edit.open($event)">
        <ion-icon name="ellipsis-vertical-outline"></ion-icon>
      </ion-button>
      <ion-button color="danger" fill="solid" (click)="openSubscribeModal()">
        Subscribe
      </ion-button>
    </ion-buttons>
    <div style="align-self: center">
      <h1 style="display: inline-block">{{ bucket?.title }}</h1>
      <ion-chip [outline]="true">{{ label(bucket?.visibility) }}</ion-chip>
    </div>
    <p class="ion-margin-vertical description">
      <a [href]="bucket?.websiteUrl" referrerpolicy="no-referrer"
        >{{ bucket?.websiteUrl }}</a
      >
      {{ bucket?.description }}
    </p>
  </div>

  <div>
    <ion-buttons class="ion-float-end">
      <ion-button
        routerLink="../articles"
        class="section-button"
        [ngClass]="{'active': showArticles}"
      >
        Articles
      </ion-button>
      <ion-button
        routerLink="../sources"
        class="section-button"
        [ngClass]="{'active': !showArticles}"
      >
        Sources
      </ion-button>
    </ion-buttons>
  </div>

  <app-articles
    *ngIf="showArticles && bucket"
    name="article"
    (filterChange)="filterData = $event"
    [streamId]="bucket?.streamId"
  >
    <!--    <ion-button color="primary" fill="solid"> Add Article </ion-button>-->
  </app-articles>
  <app-importers
    *ngIf="!showArticles && bucket"
    [bucketId]="bucket?.id"
  ></app-importers>
</ion-content>
