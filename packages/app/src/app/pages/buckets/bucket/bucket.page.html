<app-page-header>
  <ion-title>Bucket</ion-title>
</app-page-header>

<ion-content>
  <div class="limited-width-pane">
    <img [src]="bucket?.imageUrl" alt="" />

    <ion-row style="margin-top: 200px">
      <ion-col size="8">
        <h1 class="ion-no-margin">{{ bucket?.title }}</h1>
        <ion-chip [outline]="true">{{ label(bucket?.visibility) }}</ion-chip>
      </ion-col>
      <ion-col size="4" class="actions">
        <ion-buttons class="ion-float-end">
          <ion-button (click)="editBucket()"> Edit </ion-button>
          |
          <ion-button (click)="deleteBucket()"> Delete </ion-button>
          <ion-button
            color="danger"
            fill="solid"
            (click)="openSubscribeModal()"
          >
            Subscribe
          </ion-button>
        </ion-buttons>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col>
        <app-external-link [url]="bucket?.websiteUrl" title="Website">
          <ion-icon name="globe-outline"></ion-icon>
        </app-external-link>
        <app-external-link [url]="bucket?.id" title="Feed">
          <ion-icon name="logo-rss"></ion-icon>
        </app-external-link>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col class="description"> {{ bucket?.description }} </ion-col>
    </ion-row>

    <div>
      <ion-buttons class="ion-float-end">
        <ion-button
          routerLink="../articles"
          class="section-button"
          [ngClass]="{'active': showArticles}"
        >
          Articles
        </ion-button>
        <ion-button
          routerLink="../sources"
          class="section-button"
          [ngClass]="{'active': !showArticles}"
        >
          Sources
        </ion-button>
      </ion-buttons>
    </div>

    <app-articles
      *ngIf="showArticles && bucket"
      name="article"
      (filterChange)="filterData = $event"
      [streamId]="bucket?.streamId"
      [isOwner]="isOwner"
    >
      <!--    <ion-button color="primary" fill="solid"> Add Article </ion-button>-->
    </app-articles>
    <app-importers
      *ngIf="!showArticles && bucket"
      [bucketId]="bucket?.id"
    ></app-importers>
  </div>
</ion-content>
