<div class="flex__column">
  <app-wizard-fetch-options
    [options]="false"
    [handler]="handler"
  ></app-wizard-fetch-options>

  <ion-spinner *ngIf="handler.getContext().busy" name="dots"></ion-spinner>

  <div *ngIf="isWebsite()">
    <ion-list>
      <ion-item class="note">
        <ion-label><em>Options for Website</em></ion-label>
      </ion-item>
      <ion-item
        style="color: #cccccc; font-size: 0.8rem"
        class="note"
        *ngIf="isRedirected()"
      >
        <ion-label>
          Redirected to {{ getHostname(effectiveWebsiteUrl) }}
        </ion-label>
      </ion-item>

      <ion-item [button]="true" (click)="startFeedDiscoveryFlow()">
        <ion-label>Feeds in HTML</ion-label>
        <ion-icon name="chevron-forward" color="primary"></ion-icon>
      </ion-item>
      <ion-item [button]="true" (click)="startPageChangedFlow()">
        <ion-label>
          Feed from Page Changes
          <app-feature-chip
            [featureName]="feedFromPageChange"
          ></app-feature-chip
        ></ion-label>
        <ion-icon name="chevron-forward" color="primary"></ion-icon>
      </ion-item>
    </ion-list>

    <!--    <ion-list class="ion-margin-top">-->
    <!--      <ion-item>-->
    <!--        <ion-note>Existing Feeds</ion-note>-->
    <!--      </ion-item>-->

    <!--      <ion-item-->
    <!--        [button]="true"-->
    <!--        *ngFor="let nativeFeed of matchingFeeds"-->
    <!--        (click)="startExistingNativeFeedRefinementFlow(nativeFeed)"-->
    <!--      >-->
    <!--        <ion-label>-->
    <!--          <h3>{{ nativeFeed.title }}</h3>-->
    <!--          <p>{{ nativeFeed.websiteUrl }}</p>-->
    <!--        </ion-label>-->
    <!--        <ion-icon name="chevron-forward" color="primary"></ion-icon>-->
    <!--      </ion-item>-->
    <!--    </ion-list>-->
  </div>

  <div *ngIf="isFeed()">
    <ion-list>
      <ion-item class="note">
        <ion-label><em>Options for Native Feed</em></ion-label>
        <!--        <ion-button fill="solid" color="dark">Show Website</ion-button>-->
      </ion-item>

      <ion-item
        [button]="true"
        *ngFor="let nativeFeed of handler.getDiscovery().nativeFeeds"
        (click)="startCreateNativeFeedRefinementFlow(nativeFeed)"
      >
        <ion-label color="primary">Refine Feed</ion-label>
        <ion-icon name="chevron-forward" color="primary"></ion-icon>
      </ion-item>
    </ion-list>
  </div>

  <ion-card
    color="danger"
    *ngIf="
      handler.getDiscovery() &&
      !handler.getDiscovery().failed &&
      !isSourceSupported()
    "
  >
    <ion-card-header>
      <ion-card-title>Source is not supported</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      The URL returns a mimetype {{ mimetype() }} that is not supported.
    </ion-card-content>
  </ion-card>
</div>
